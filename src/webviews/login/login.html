<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IBM i Log in</title>

    <script src="(onDiskSrc)" type="module"></script>
    <style>
        #systemConnect {
            margin: 2em 2em 2em 2em;
        }
    </style>
</head>

<body>

    <div id="systemConnect">
        <vscode-form-item>
            <vscode-form-label>IP or Hostname</vscode-form-label>
            <!-- <vscode-form-description>Controls the font size in pixels.</vscode-form-description> -->
            <vscode-form-control>
                <vscode-inputbox id="host" name="host" required></vscode-inputbox>
            </vscode-form-control>
        </vscode-form-item>

        <vscode-form-item>
            <vscode-form-label>Port</vscode-form-label>
            <!-- <vscode-form-description>Controls the font size in pixels.</vscode-form-description> -->
            <vscode-form-control>
                <vscode-inputbox id="port" name="port" value="22" required></vscode-inputbox>
            </vscode-form-control>
        </vscode-form-item>

        <vscode-form-item>
            <vscode-form-label>Username</vscode-form-label>
            <!-- <vscode-form-description>Controls the font size in pixels.</vscode-form-description> -->
            <vscode-form-control>
                <vscode-inputbox id="username" name="username" maxlength="10" required></vscode-inputbox>
            </vscode-form-control>
        </vscode-form-item>

        <vscode-form-item>
            <vscode-form-label>Password</vscode-form-label>
            <!-- <vscode-form-description>Controls the font size in pixels.</vscode-form-description> -->
            <vscode-form-control>
                <vscode-inputbox type="password" id="password" name="password" required></vscode-inputbox>
            </vscode-form-control>
        </vscode-form-item>

        <vscode-button id="submitCreate">Connect</vscode-button>
        
        <vscode-form-description>Thanks for using Code for IBM i!</vscode-form-description>

    </div>

    <script>
        (function () {
            const vscode = acquireVsCodeApi();
            const form = document.getElementById('submitCreate');
            const fields = ['host', 'port', 'username', 'password'];

            form.onclick = (event) => {
                event.preventDefault();

                var data = {};

                for (const field of fields) data[field] = document.getElementById(field).value;

                vscode.postMessage({
                    command: 'login',
                    data
                })
            };
        }())
    </script>
</body>

</html>